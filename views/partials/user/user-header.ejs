<header class="header">
  <a href="/">
    <img class="logo-img" src="/images/logo.png" width="150" alt="" /></a>
  <nav class="nav">
    <a href="/">home</a>
    <a href="/wish-list">Wishlist </a>
    <a href="#products">products</a>
    <a href="#categories">categories</a>
  </nav>

  <div class="icons">
    <div class="fas fa-bars" id="menu-btn"></div>
    <div class="fas fa-search" id="search-btn"></div>
    <a href="/cart">
      <div class="fas fa-shopping-cart" id="cart-btn"></div>
    </a>
    <div class="fas fa-user" id="login-btn"></div>
  </div>

  <form action="/search" method="get" class="search-form">
    <input type="search" id="search-box" name="query" placeholder="search here..." required />
    <button type="submit" for="search-box" class="fas fa-search"></button>
  </form>

  <% if (typeof user !== 'undefined' && user) { %>
  <div class="action">
    <div class="menu">
      <h3 class="text-capitalize">
        <%= user.fullname %> <br /><span class="text-muted text-lowercase"><%= user.email %></span>
      </h3>
      <ul>
        <a href="/my-profile">
          <li>
            <i class="far fa-user-circle"></i>
            <a href="/my-profile">My Profile</a>
          </li>
        </a>
        <li>
          <i class="far fa-question-circle"></i>
          <a href="#">Help</a>
        </li>
        <a href="/logout">
          <li>
            <i class="far text-danger fa-envelope"></i>
            <a href="/logout" class="text-danger">Logout</a>
          </li>
        </a>
      </ul>
    </div>
  </div>
  <% } else { %>
  <div class="action">
    <div class="menu">
      <ul>
        <a href="/signup">
          <li>
            <i class="fa-solid fa-user-plus"></i>
            <a href="/signup">Sign Up</a>
          </li>
        </a>
       <a href="/login">
        <li>
          <i class="fas fa-sign-in"></i>
          <a href="/login">Login</a>
        </li>
       </a>
      </ul>
    </div>
  </div>
  <% } %>
</header>
<script>
// Select the elements
let searchForm = document.querySelector(".search-form");
let account = document.querySelector(".menu");
let navbar = document.querySelector(".nav");

// Toggle active class for search form
document.querySelector("#search-btn").onclick = () => {
  searchForm.classList.toggle("active");
  account.classList.remove("active");
  navbar.classList.remove("active");
};

// Toggle active class for account menu
document.querySelector("#login-btn").onclick = () => {
  account.classList.toggle("active");
  searchForm.classList.remove("active");
  navbar.classList.remove("active");
};

// Toggle active class for navbar
document.querySelector("#menu-btn").onclick = () => {
  navbar.classList.toggle("active");
  searchForm.classList.remove("active");
  account.classList.remove("active");
};

// Remove active class when clicking outside the elements
document.addEventListener("click", (event) => {
  // Check if the click was outside the searchForm, account, or navbar
  if (
    !searchForm.contains(event.target) &&
    !account.contains(event.target) &&
    !navbar.contains(event.target) &&
    !document.querySelector("#search-btn").contains(event.target) &&
    !document.querySelector("#login-btn").contains(event.target) &&
    !document.querySelector("#menu-btn").contains(event.target)
  ) {
    searchForm.classList.remove("active");
    account.classList.remove("active");
    navbar.classList.remove("active");
  }
});

</script>